<!DOCTYPE html>
<html lang="fr">

<head>
  <title>Radio France - Replay & direct</title>
  <meta charset="UTF-8">
  <meta name="title" content="Radio France - Replay & direct">
  <meta name="description"
    content="Ecouter le direct ou le replay, à l'heure de votre choix, de toutes les antennes de Radio France">
  <meta name="keywords" content="replay, radio, Radio France, direct">
  <meta name=" author" content="Bouboufez">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#005DCB">
  <meta name="color-scheme" content="light dark">
  <link href="https://www.radiofrance.fr/dist/favicons/radiofrance/favicon.png" rel="icon" type="image/png">
  <link rel="apple-touch-icon" href="https://www.radiofrance.fr/dist/favicons/logo-57.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://www.radiofrance.fr/dist/favicons/logo-72.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://www.radiofrance.fr/dist/favicons/logo-114.png">

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"
    integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>

  <style>
    header {
      margin-top: 30px;
      margin-left: 30px;
      margin-right: 30px;
      margin-bottom: 50px;
    }

    button.subrep {
      margin-bottom: 30px;
    }

    div.img-top {
      height: 45px;
      width: 297px;
      background-image: url("https://charte.dnm.radiofrance.fr/images/radiofrance/radio-france.svg");
      display: block;
      margin-left: auto;
      margin-right: auto;
      background-size: 297px 45px;
      margin-bottom: 20px;
    }

    h1 {
      margin-top: 0px;
      color: #161616;
      font-size: 35px;
      margin-bottom: 0px;
      font-family: Montserrat Subrayada;
      font-weight: normal;
    }

    h2 {
      margin: 10px;
      font-size: 25px;
    }

    body {
      text-align: center;
      color: #353535;
      background-color: #E1E1E1;
      font-size: 20px;
      font-family: Montserrat Medium;
    }

    footer {
      font-size: 10px;
      color: #545454;
      margin-top: 40px;
      font-family: Montserrat Regular;
    }

    button {
      background-color: rgb(0, 93, 203);
      color: #E1E1E1;
      border-radius: 2px;
      padding-left: 40px;
      padding-right: 40px;
      padding-top: 10px;
      padding-bottom: 10px;
      font-family: Montserrat SemiBold;
      border: none;
      font-size: 18px;
      margin: 10px;
      transition: 0.2s;
    }

    .radiobuttons {
      border: 1px solid;
      border-radius: 28px;
      padding: 11px;
      display: inline-block;
      background-color: #B4B4B4;
      color: #353535;
      margin: 5px;
      cursor: pointer;
    }

    .radiobuttons:hover,
    .radiobuttons:focus {
      background-color: #002E65;
      cursor: pointer;
    }

    input.vol {
      height: 48px;
      margin: 10px 20px 10px 0;
      width: 195px;
      vertical-align: middle;
    }

    button.play {
      background-size: 48px 48px;
      border-top: 0.5em solid rgba(0, 93, 203, .2);
      border-left: 0.5em solid rgba(0, 93, 203, .2);
      border-bottom: 0.5em solid rgba(0, 93, 203, .2);
      border-right: 0.5em solid #005DCB;
      background-color: transparent;
      padding: 0px;
      height: 48px;
      width: 48px;
      border-radius: 25px;
      margin-left: 20px;
      margin-bottom: 10px;
      animation: rotate 1.1s infinite linear;
      transition: none;
      vertical-align: middle;
    }

    #playdiv {
      display: none;
    }

    div.divpause {
      width: 0px;
      height: 15px;
      margin: auto;
      border-left: 8px solid white;
      border-right: 8px solid white;
      display: inline-block;
      padding: 2.5px;
      border-top: none;
      border-bottom: none;
      background-color: transparent;
    }

    div.divplay {
      display: inline-block;
      background-color: white;
      margin: auto;
      width: 0px;
      height: 0px;
      border-top: 10px solid rgb(0, 93, 203);
      border-bottom: 10px solid rgb(0, 93, 203);
      border-left: 15px solid white;
      border-right: none;
      padding: 0px;
    }

    button.play:hover,
    button.play:focus,
    button.mute:hover,
    button.mute:focus {
      cursor: pointer;
    }

    button.mute {
      background-image: url("https://www.francetvinfo.fr/skin/dist/www/img/player-franceinfo/mute-2a46b895c3.png");
      border: none;
      border-radius: 25px;
      height: 48px;
      width: 48px;
      padding: 0px;
      margin-left: 20px;
      vertical-align: middle;
    }

    video {
      display: none;
    }

    a {
      text-decoration: none;
      color: #353535;
      transition: 0.2s;
    }

    a:hover,
    a:focus {
      text-decoration: none;
      color: #545454;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Montserrat Regular';
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src: local('Montserrat Regular'), local('Montserrat-Regular'), url(https://fonts.gstatic.com/s/montserrat/v14/JTUSjIg1_i6t8kCHKm459Wdhyzbi.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Montserrat Regular';
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src: local('Montserrat Regular'), local('Montserrat-Regular'), url(https://fonts.gstatic.com/s/montserrat/v14/JTUSjIg1_i6t8kCHKm459Wlhyw.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }


    /* latin-ext */
    @font-face {
      font-family: 'Montserrat Medium';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: local('Montserrat Medium'), local('Montserrat-Medium'), url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_ZpC3gfD_u50.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Montserrat Medium';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: local('Montserrat Medium'), local('Montserrat-Medium'), url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_ZpC3gnD_g.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }


    /* latin-ext */
    @font-face {
      font-family: 'Montserrat SemiBold';
      font-style: normal;
      font-weight: 600;
      font-display: swap;
      src: local('Montserrat SemiBold'), local('Montserrat-SemiBold'), url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_bZF3gfD_u50.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Montserrat SemiBold';
      font-style: normal;
      font-weight: 600;
      font-display: swap;
      src: local('Montserrat SemiBold'), local('Montserrat-SemiBold'), url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_bZF3gnD_g.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }


    /* latin-ext */
    @font-face {
      font-family: 'Montserrat Bold';
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src: local('Montserrat Bold'), local('Montserrat-Bold'), url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_dJE3gfD_u50.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Montserrat Bold';
      font-style: normal;
      font-weight: 700;
      font-display: swap;
      src: local('Montserrat Bold'), local('Montserrat-Bold'), url(https://fonts.gstatic.com/s/montserrat/v14/JTURjIg1_i6t8kCHKm45_dJE3gnD_g.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }


    /* latin */
    @font-face {
      font-family: 'Montserrat Subrayada';
      font-style: normal;
      font-weight: 400;
      src: local('MontserratSubrayada-Regular'), url(https://fonts.gstatic.com/s/montserratsubrayada/v9/U9MD6c-o9H7PgjlTHThBnNHGVUORwteQQH8MaOY.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* latin */
    @font-face {
      font-family: 'Montserrat Subrayada';
      font-style: normal;
      font-weight: 700;
      src: local('MontserratSubrayada-Bold'), url(https://fonts.gstatic.com/s/montserratsubrayada/v9/U9MM6c-o9H7PgjlTHThBnNHGVUORwteQQHe3TfMRiXk.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }

    /* Dark theme */
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #353535;
        color: #B4B4B4;
      }

      h1 {
        color: #D1D1D1;
      }

      footer {
        color: #969696;
      }

      div.img-top {
        background-image: url("https://charte.dnm.radiofrance.fr/images/radiofrance/radio-france-blanc.svg");
      }

      a {
        text-decoration: none;
        color: #B4B4B4;
      }

      a:hover,
      a:focus {
        text-decoration: none;
        color: #969696;
      }

    }
  </style>
</head>

<body>
  <header>
    <div class="img-top"></div>
    <h1 id="titl2"> </h1>
  </header>
  <div>
    Fip :

    <a class="radiobuttons" onclick="return changeRadio('fip');">Fip</a>
    <a class="radiobuttons" onclick="return changeRadio('fiprock');">Rock</a>
    <a class="radiobuttons" onclick="return changeRadio('fipjazz');">Jazz</a>
    <a class="radiobuttons" onclick="return changeRadio('fipgroove');">Groove</a>
    <a class="radiobuttons" onclick="return changeRadio('fippop');">Pop</a>
    <a class="radiobuttons" onclick="return changeRadio('fipelectro');">Electro</a>
    <a class="radiobuttons" onclick="return changeRadio('fipworld');">Monde</a>
    <a class="radiobuttons" onclick="return changeRadio('fipreggae');">Reggae</a>
    <a class="radiobuttons" onclick="return changeRadio('fipnouveautes');">Nouveautés</a>
    <a class="radiobuttons" onclick="return changeRadio('fipmetal');">Métal</a>
    <a class="radiobuttons" onclick="return changeRadio('fiphiphop');">Hip-Hop</a>
  </div>
  <br />
  <div>
    France Musique :

    <a class="radiobuttons" onclick="return changeRadio('francemusique');">France Musique</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiqueeasyclassique');">Classique Easy</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiquebaroque');">Baroque</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiqueclassiqueplus');">Classique Plus</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiqueconcertsradiofrance');">Concerts Radio France</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiquelajazz');">Jazz</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiquelacontemporaine');">Contemporaine</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiqueocoramonde');">Ocora Musiques du Monde</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiquelabo');">B.O. Musiques de Films</a>
    <a class="radiobuttons" onclick="return changeRadio('francemusiqueopera');">Opéra</a>
  </div>
  <div>
      <p><span id="song_title"></span></p>
      <p><span id="song_authors"></span> <span id="song_album"></span> <span id="song_date"></span></p>
  </div>
  <br />
  <div id="cont" style="height:170px">
    <video id="lecteur"></video>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.3.4/dist/hls.min.js" type="text/javascript"></script>

    <button class="play" id="pp" onclick="playClick()">
      <div id="playdiv"></div>
    </button>
    <button class="mute" onclick="muteClick()" id="mut"></button>
    <input type="range" min="0" max="100" step="1" class="vol" value="100" onclick="vol()" id="son">
  </div>


  <footer>
    <div style="font-size: 12px;">
      Fip et France musique rapide<br>
    </div>
    <br>La page utilise la bibliothèque hls.js
    <br>Tous les droits reviennent à Radio France
    <br>
    <br><a href="https://github.com/bertrandgorge/Radio-France-replay-direct" target="_blank">Retrouvez le projet sur
      Github</a>
  </footer>
</body>

<script>

  var nowPlaying = false;

  var radiocode = 'fip';

  var hls;
  const radios = new Map();

  radios.set('fip', {'display': "FIP (national)", 'apiId': "FIP"});
  radios.set('fiprock', {'display': "FIP Rock", 'apiId': "FIP_ROCK"});
  radios.set('fipjazz', {'display': "FIP Jazz", 'apiId': "FIP_JAZZ"});
  radios.set('fipgroove', {'display': "FIP Groove", 'apiId': "FIP_GROOVE"});
  radios.set('fippop', {'display': "FIP Pop", 'apiId': "FIP_POP"});
  radios.set('fipelectro', {'display': "FIP Electro", 'apiId': "FIP_ELECTRO"});
  radios.set('fipworld', {'display': "FIP Monde", 'apiId': "FIP_WORLD"});
  radios.set('fipreggae', {'display': "FIP Reggae", 'apiId': "FIP_REGGAE"});
  radios.set('fipnouveautes', {'display': "FIP Nouveautés", 'apiId': "FIP_NOUVEAUTES"});
  radios.set('fipmetal', {'display': "FIP Métal", 'apiId': "FIP_METAL"});
  radios.set('fiphiphop', {'display': "FIP Hip-Hop", 'apiId': ""});

  radios.set('francemusique', {'display': "France Musique", 'apiId': "FRANCEMUSIQUE"});
  radios.set('francemusiqueeasyclassique', {'display': "France Musique Classique Easy", 'apiId': "FRANCEMUSIQUE_CLASSIQUE_EASY"});
  radios.set('francemusiquebaroque', {'display': "France Musique la Baroque", 'apiId': ""});
  radios.set('francemusiqueclassiqueplus', {'display': "France Musique Classique Plus", 'apiId': "FRANCEMUSIQUE_CLASSIQUE_PLUS"});
  radios.set('francemusiqueconcertsradiofrance', {'display': "France Musique Concerts Radio France", 'apiId': "FRANCEMUSIQUE_CONCERT_RF"});
  radios.set('francemusiquelajazz', {'display': "France Musique la Jazz", 'apiId': "FRANCEMUSIQUE_LA_JAZZ"});
  radios.set('francemusiquelacontemporaine', {'display': "France Musique la Contemporaine", 'apiId': "FRANCEMUSIQUE_LA_CONTEMPORAINE"});
  radios.set('francemusiqueocoramonde', {'display': "France Musique Ocora Musiques du Monde", 'apiId': "FRANCEMUSIQUE_OCORA_MONDE"});
  radios.set('francemusiquelabo', {'display': "France Musique la B.O. Musiques de Films", 'apiId': ""});
  radios.set('francemusiqueopera', {'display': "France Musique Opéra", 'apiId': ""});

  function changeRadio(newRadioCode) {
    radiocode = newRadioCode;
    showRadioTitle();
    go(0);
    return false;
  }

  function link() {
    var qual = "_hifi"; // _lofi _midfi;

    if (radiocode == '')
      return;

    return "https://stream.radiofrance.fr/" + radiocode + "/" + radiocode + qual + ".m3u8";
  }

  function go() {
    var video = document.getElementById("lecteur");
    var source = link();

    console.log(source);

    if (!Hls.isSupported()) {
      video.src = source;
    } else {
      hls = new Hls();
      hls.loadSource(source);
      hls.attachMedia(video);
      window.hls = hls;
    }

    video.play()
    document.getElementById("son").value = 100
    document.getElementById("cont").style.display = "inline-block";

    showPauseButton();
    vol();
  }

  function showPlayButton() {
    // Affiche le bouton play
    document.getElementById("pp").style.backgroundColor = "rgb(0, 93, 203)";
    document.getElementById("pp").style.border = "none";
    document.getElementById("pp").style.animation = "none";
    nowPlaying = false;
    playdiv.classList.add("divplay")
    if (playdiv.classList.contains("divpause") == true) {
      playdiv.classList.remove("divpause");
    }
    playdiv.style.display = "block";
  }

  function showPauseButton() {
    // Affiche le bouton pause
    document.getElementById("pp").style.backgroundColor = "rgb(0, 93, 203)";
    document.getElementById("pp").style.border = "none";
    document.getElementById("pp").style.animation = "none";
    nowPlaying = true;
    playdiv.classList.add("divpause");
    if (playdiv.classList.contains("divplay") == true) {
      playdiv.classList.remove("divplay");
    }
    playdiv.style.display = "block";
  }

  function playClick() {
    var video = document.getElementById("lecteur");

    if (nowPlaying) {
      video.pause();
      showPlayButton();
    }
    else {
      video.play();
      showPauseButton();
    }
  }

  function muteClick() {
    var video = document.getElementById("lecteur");
    if (video.muted == true) {
      video.muted = false;
    } else {
      video.muted = true;
    }
    volDisp();
  }

  function volDisp() {
    var video = document.getElementById("lecteur")
    if (video.muted == true || document.getElementById("son").value == 0) {
      document.getElementById("mut").style.backgroundImage = "url('https://www.francetvinfo.fr/skin/dist/www/img/player-franceinfo/unmute-8bfc2f00ea.png')";
    } else {
      document.getElementById("mut").style.backgroundImage = "url('https://www.francetvinfo.fr/skin/dist/www/img/player-franceinfo/mute-2a46b895c3.png')";
    }
  }

  function vol() {
    var video = document.getElementById("lecteur");
    var slider = document.getElementById("son");
    video.volume = slider.value / 100;
    volDisp();

    slider.oninput = function () {
      var video = document.getElementById("lecteur");
      video.volume = this.value / 100;
      volDisp();
    }
  }

  function showRadioTitle() {
    if (!radios.has(radiocode)) {
      document.querySelector("title").innerHTML = document.getElementById("titl2").innerHTML = "Radio France";
      return;
    }

    document.querySelector("title").innerHTML = document.getElementById("titl2").innerHTML = radios.get(radiocode).display;
  }

  function getCurrentTitle() {

    if (!radios.has(radiocode))
      return;

    var ApiId = radios.get(radiocode).apiId;

    if (ApiId == '')
      return;

    $.ajax({
      url: "https://openapi.radiofrance.fr/v1/graphql?x-token=YOUR_TOKEN_HERE",
      method: 'POST',
      dataType: "json",
      contentType: "application/json",
      data: JSON.stringify({query: `{
               live(station: ` + ApiId + `)
               {
                  song {
                      id
                      start
                      end
                      track {
                        id
                        title
                        albumTitle
                        authors
                        mainArtists
                        productionDate
                        composers
                      }
                }
              }
            }`}),
      success: function (result) {
        console.log(result);

        if (result.data.live.song == null)
        {
          document.getElementById("song_title").innerHTML = "";
          document.getElementById("song_authors").innerHTML = "";
          document.getElementById("song_album").innerHTML = "";
          document.getElementById("song_date").innerHTML = "";
        }
        else
        {
          document.getElementById("song_title").innerHTML = result.data.live.song.track.title;
          document.getElementById("song_authors").innerHTML = result.data.live.song.track.mainArtists + " " + result.data.live.song.track.composers.join(", ");
          document.getElementById("song_album").innerHTML = " - " + result.data.live.song.track.albumTitle;
          document.getElementById("song_date").innerHTML = result.data.live.song.track.productionDate;
        }
      }
    });
  }

  function getArguments() {
    var arg = [];

    var base = window.location.search;
    base = base.slice(1, base.length);
    var tmparguments = base.split("&");
    var k;
    for (k = 0; k < tmparguments.length; k++) {
      var tmpsplit = tmparguments[k].split("=");
      if (arg.length == 0) {
        arg = [tmpsplit[0], tmpsplit[1]];
      } else {
        arg.push(tmpsplit[0]);
        arg.push(tmpsplit[1]);
      }
    }

    var y;
    for (y = 0; y < arg.length; y = y + 2)
    {
      if (arg[y] == "radio")
      {
        if (radios.has(arg[y + 1]))
          changeRadio(arg[y + 1]);
        break;
      }
    }
  }

  changeRadio('fip');
  getArguments();
  showPlayButton();

  setInterval(getCurrentTitle, 5000);
</script>
</html>